<!-- Top Search Bar (Teal themed) -->
<div class="toolbar shadow-sm">
<div class="container">
<div class="input-group search-group">
<input
        type="text"
        class="form-control search-input"
        placeholder="Search Hospital Name, Location, or ID"
        [(ngModel)]="modalSearchQuery"
        id="search-input"
        (keyup.enter)="filterHospital()"
        aria-label="Search Hospital Name, Location, or ID"
      />
<button class="btn btn-gradient" type="button" (click)="filterHospital()" aria-label="Search">
<span class="btn-icon">üîé</span> Search
</button>
<button class="btn btn-outline-clear" type="button" (click)="closeIt()" aria-label="Clear search">
        Clear
</button>
</div>
</div>
</div>
 
<!-- Page Container -->
<div class="container py-4">
<div class="row">
<div class="col">
<h2 class="text-center fw-bold page-title animate__animated animate__fadeInDown">Hospital Management</h2>
</div>
</div>
 
  <!-- Add Hospital Card -->
<div class="row mt-3">
<div class="col-md-12">
<div class="card shadow soft-card animate__animated animate__fadeIn">
<div class="card-header fw-bold">Add Hospital</div>
<div class="card-body">
<form [formGroup]="itemForm" (ngSubmit)="onSubmit()" novalidate class="animate__animated animate__fadeIn">
<div class="mb-3">
<label for="name" class="form-label fw-bold">Hospital Name</label>
<input
                id="name"
                formControlName="name"
                type="text"
                class="form-control"
                [ngModel]="formModel.name"
                placeholder="Name of Hospital"
              />
<div
                *ngIf="itemForm.get('name')?.invalid && (itemForm.get('name')?.dirty || itemForm.get('name')?.touched)"
                class="text-danger mt-1"
                role="alert"
>
<span class="fw-semibold">* Please enter a hospital name</span>
</div>
</div>
 
            <div class="mb-3">
<label for="location" class="form-label fw-bold">Hospital Location</label>
<input
                id="location"
                formControlName="location"
                type="text"
                class="form-control"
                [ngModel]="formModel.location"
                placeholder="Location of Hospital"
              />
<div
                *ngIf="itemForm.get('location')?.invalid && (itemForm.get('location')?.dirty || itemForm.get('location')?.touched)"
                class="text-danger mt-1"
                role="alert"
>
<span class="fw-semibold">* Please enter a location</span>
</div>
</div>
 
            <button class="btn btn-gradient btn-lg w-auto" [disabled]="itemForm.invalid">
              Submit
</button>
 
            <div *ngIf="showMessage" class="alert alert-success mt-4" role="alert" aria-live="polite">
              {{ responseMessage }}
</div>
<div *ngIf="showError" class="alert alert-danger mt-4" role="alert" aria-live="assertive">
              {{ errorMessage }}
</div>
</form>
</div>
</div>
</div>
</div>
 
  <!-- Filtered Results (Cards) -->
<div class="row mt-4" *ngIf="showHospitalfilterData">
<div class="col-12">
<div
        *ngIf="isClick !== true"
        id="errorSeach"
        class="alert alert-warning animate__animated animate__fadeIn"
        role="alert"
        aria-live="assertive"
>
        {{ NotFoundMessage }}
</div>
 
      <div
        *ngIf="isClick === true"
        class="alert alert-success fw-bold animate__animated animate__fadeIn"
        role="status"
        aria-live="polite"
>
        {{ FoundMessage }}
</div>
</div>
 
    <ng-container *ngIf="isClick === true">
<div class="card-grid">
<div
          class="hospital-card animate__animated animate__fadeInUp"
          *ngFor="let hospital of filteredHospitalList; trackBy: trackByHospitalId"
>
<div class="card-accent"></div>
<div class="card-bodyy">
<div class="badge-id">#{{ hospital.id }}</div>
<h5 class="card-title mb-1">{{ hospital.name }}</h5>
<p class="card-subtitle text-muted mb-3">
<span class="loc-dot">‚óè</span> {{ hospital.location }}
</p>
<div class="d-flex gap-2">
<button
                class="btn btn-gradient"
                (click)="Addequipment(hospital)"
                data-bs-toggle="modal"
                data-bs-target="#driverModal"
>
                Assign Equipments
</button>
<button class="btn btn-ghost" type="button" (click)="viewDetails(hospital)">
                Details
</button>
</div>
</div>
</div>
</div>
</ng-container>
</div>
 
  <!-- All Hospitals (Cards) -->
<div class="row mt-5" *ngIf="showHospitalData">
<div class="col-md-12">
<div class="card shadow soft-card animate__animated animate__fadeIn">
<div class="card-header fw-bold">Hospital Information</div>
<div class="card-body">
<div class="card-grid">
<div
              class="hospital-card animate__animated animate__fadeInUp"
              *ngFor="let hospital of hospitalList; trackBy: trackByHospitalId"
>
<div class="card-accent"></div>
<div class="card-bodyy">
<div class="badge-id">#{{ hospital.id }}</div>
<h5 class="card-title mb-1">{{ hospital.name }}</h5>
<p class="card-subtitle text-muted mb-3">
<span class="loc-dot">‚óè</span> {{ hospital.location }}
</p>
<div class="d-flex gap-2">
<button
                    class="btn btn-gradient"
                    (click)="Addequipment(hospital)"
                    data-bs-toggle="modal"
                    data-bs-target="#driverModal"
>
                    Assign Equipments
</button>
</div>
</div>
</div>
 
            <!-- Optional empty state -->
<div class="empty-state" *ngIf="hospitalList?.length === 0">
<p>No hospitals to display yet.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
 
<!-- Assign Equipment Modal -->
<div class="modal fade" id="driverModal" tabindex="-1" aria-labelledby="driverModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content modal-soft">
<div class="modal-header">
<h5 class="modal-title" id="driverModalLabel">Assign Equipment</h5>
</div>
<div class="modal-body">
<form
          [formGroup]="equipmentForm"
          (ngSubmit)="submitEquipment()
          "
          class="animate__animated animate__fadeIn"
          novalidate
>
<div class="mb-3">
<input formControlName="hospitalId" type="hidden" />
<label for="eqname" class="form-label fw-bold">Equipment Name</label>
<input
              id="eqname"
              type="text"
              formControlName="name"
              class="form-control"
              [ngModel]="formModel.name"
              placeholder="Name of Equipment"
            />
<div
              *ngIf="equipmentForm.get('name')?.invalid && (equipmentForm.get('name')?.dirty || equipmentForm.get('name')?.touched)"
              class="text-danger mt-1"
>
<span class="fw-semibold">* Please enter a name.</span>
</div>
</div>
 
          <div class="mb-3">
<label for="eqdesc" class="form-label fw-bold">Description</label>
<input
              id="eqdesc"
              type="text"
              formControlName="description"
              class="form-control"
              [ngModel]="formModel.description"
              placeholder="Description"
            />
<div
              *ngIf="equipmentForm.get('description')?.invalid && (equipmentForm.get('description')?.dirty || equipmentForm.get('description')?.touched)"
              class="text-danger mt-1"
>
<span class="fw-semibold">* Please enter a description.</span>
</div>
</div>
 
          <div *ngIf="showMessage" class="alert alert-success mt-3" role="alert">
            {{ responseMessage }}
</div>
<div *ngIf="showError" class="alert alert-danger mt-3" role="alert">
            {{ errorMessage }}
</div>
 
          <div class="modal-footer">
<button type="submit" class="btn btn-gradient" [disabled]="equipmentForm.invalid">Save</button>
<button type="button" class="btn btn-ghost" data-bs-dismiss="modal">Close</button>
</div>
</form>
</div>
</div>
</div>
</div>